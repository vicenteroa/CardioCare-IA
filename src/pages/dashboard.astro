---
import { app } from "../firebase/server";
import { getAuth } from "firebase-admin/auth";
import Layout from "../layouts/Layout.astro";
import SideBar from "../components/SideBar.astro";


const auth = getAuth(app);

/* Verificar la sesión actual */
if (!Astro.cookies.has("session")) {
  return Astro.redirect("/signin");
}
const sessionCookie = Astro.cookies.get("session").value;
const decodedCookie = await auth.verifySessionCookie(sessionCookie);
const user = await auth.getUser(decodedCookie.uid);

if (!user) {
  return Astro.redirect("/signin");
}
---

<Layout title="Testimonio">
  <h1>Bienvenido {user.displayName}</h1>
  <p>Nos alegra verte aquí</p>
  <form action="/api/auth/signout">
    <button type="submit">Cerrar sesión</button>
  </form>
  <div class="p-4 sm:ml-64">
  <h1>hola</h1>
</div>
  <SideBar
  name={user.displayName}
  op1="Opcion 1"
  op2="Opcion 2"
  op3="Opcion 3"
  op4="Opcion 4"

  >




</Layout>

<SideBar name={user.displayName} />

<div style="display: flex; flex-direction: column; align-items: center; height: 80vh; background-color: #f9f9f9;">
  <div style="max-width: 1200px; width: 80%; padding: 16px; border-radius: 8px; background-color: #ffffff; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); height: 100vh;">
    <p style="font-size: 18px; margin-bottom: 8px;">Por favor, responde las siguientes preguntas:</p>
    <div style="font-size: 16px; margin-bottom: 16px;">
      <p>¿Has experimentado dolor en el pecho o malestar en el área del corazón en las últimas 24 horas?</p>
      <label>
        <input type="radio" name="chestPain" value="yes"> Sí
      </label>
      <label>
        <input type="radio" name="chestPain" value="no"> No
      </label>
    </div>
    <div style="font-size: 16px; margin-bottom: 16px;">
      <p>¿Has notado dificultad para respirar o falta de aliento durante actividades cotidianas, como subir escaleras o caminar distancias cortas?</p>
      <label>
        <input type="radio" name="shortnessOfBreath" value="yes"> Sí
      </label>
      <label>
        <input type="radio" name="shortnessOfBreath" value="no"> No
      </label>
    </div>
    <div style="font-size: 16px; margin-bottom: 16px;">
      <p>¿Tienes antecedentes familiares de enfermedades cardíacas, como ataques al corazón, hipertensión o accidentes cerebrovasculares?</p>
      <label>
        <input type="radio" name="familyHistory" value="yes"> Sí
      </label>
      <label>
        <input type="radio" name="familyHistory" value="no"> No
      </label>
    </div>
    <textarea
      rows="5"
      cols="50"
      maxlength="1000"
      minlength="200"
      placeholder="Escribe tu testimonio..."
      style="resize: none; font-size: 16px; padding: 8px; width: 100%; border: 1px solid #ccc; border-radius: 4px; box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); height: 50vh;"
    ></textarea>
    <button style="margin-top: 16px; background-color: #007bff; color: white; border: none; border-radius: 4px; padding: 8px 16px; font-size: 16px; cursor: pointer;">
      Enviar
    </button>
  </div>
</div>
